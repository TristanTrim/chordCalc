


<script>
	function put(whatever){
		nudiv = document.createElement('div');
		nudiv.innerText = whatever;
		document.body.insertBefore(
			nudiv, document.getElementById('menu')
			);
		window.scrollTo(0,document.body.scrollHeight);
	}
	function createTable(tableData) {
	  var table = document.createElement('table');
	  var tableBody = document.createElement('tbody');

	  for(let xx = 0; xx<tableData.length; xx++){
	    let rowData = tableData[xx];
	    var row = document.createElement('tr');

	    for(let xx = 0; xx<rowData.length; xx++){
	      let cellData = rowData[xx];
	      var cell = document.createElement('td');
	      cell.appendChild(document.createTextNode(cellData));
	      row.appendChild(cell);
	    }

	    tableBody.appendChild(row);
	  }

	  table.appendChild(tableBody);
	  document.body.insertBefore(
		  table, document.getElementById('menu')
		  );
	  window.scrollTo(0,document.body.scrollHeight);
	}
	function factorial(n){
		if (n>1){
			return(n*factorial(n-1));
		}else{
			return(1);
		}
	}
	function comb(n,k){
		return( factorial(n) / (factorial(k) * factorial(n-k)) );
	}
	function ways(n,f,t){
		if(f>t){
			return(comb(f,f-t));
		}else if(f<t){
			return(comb(n-f,t-f));
		}else{
			return(0);
		}
	}
	previousNumKeys = 0;
	transitionMap = null;
	function foo(){
		let numKeys = parseInt(document.getElementById('keys').value);
		let seqButton = document.getElementById('seqLen')
		let seq = JSON.parse(seqButton.value);
		if(numKeys != previousNumKeys){
			previousNumKeys = numKeys;
			transitionMap = []

			put("Transition map for "+numKeys+" keys:");
			numbz = [["",""]];
			seq = [];
			for (ii = 1; ii<=numKeys; ii++){
				seq.push(0)
				numbz[0].push(ii);
			}
			seq[0]=1;
			numbz.push(["","+"]);
			for (ii = 1; ii<=numKeys; ii++){
				numbz[1].push("-");
			}
			//// build transition map
			console.log(Date.now());
			for (ii = 0; ii<=numKeys; ii++){
				transitionMap.push([]);
				for (jj = 0; jj<=numKeys; jj++){
					transitionMap[ii].push(Math.round(ways(numKeys,ii,jj)));
				}
			}
			console.log(Date.now());
			//// build transition map printout
			for (ii = 1; ii<=numKeys; ii++){
				numbz.push([ii,"|"]);
				for (jj = 1; jj<=numKeys; jj++){
					numbz[ii+1].push(transitionMap[ii][jj]);
				}
			}
			console.log(Date.now());
			console.log(transitionMap)
			createTable(numbz);
		}
		for (ii=0;ii<seq.length;ii++){
			/// here is about the place that I would like to not be implementing matrix multiplication myself.
		}
		put(JSON.stringify(seq));
		seqButton.value = JSON.stringify(seq);
	}
</script>
<body>
	<div id="menu">
		total keys:
		<input id='keys'></input>
		cf:
		<input id='seqLen'></input>
		<button onclick="foo();">go</button>
	</div>
</body>
